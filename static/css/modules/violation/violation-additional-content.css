/*
 * –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞—Ä—É—à–µ–Ω–∏–π
 * –ë–ª–æ–∫–∏ –¥–ª—è –∫–µ–π—Å–æ–≤, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
 */

/* –û–±–µ—Ä—Ç–∫–∞ –≤—Å–µ–≥–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
.additional-content-wrapper {
    margin-top: var(--spacing-md);
    position: relative;
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
.additional-content-items {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    min-height: var(--violation-additional-content-min-height);
    padding: var(--spacing-md);
    border: var(--violation-additional-content-border-width) dashed var(--border);
    border-radius: var(--radius);
    background-color: var(--bg-secondary);
    position: relative;
    transition: all var(--transition-slow) ease;
    align-items: stretch;
}

.additional-content-items:hover {
    border-color: var(--primary);
    background-color: var(--additional-content-hover-bg);
}

/* –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞ */
.additional-content-items.drag-over-file {
    border-color: var(--primary);
    border-width: var(--violation-additional-content-border-width-drag);
    background-color: var(--drag-over-bg);
    box-shadow: var(--drag-over-shadow);
    pointer-events: auto;
}

.additional-content-items.drag-over-file::before {
    content: 'üìé –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—é–¥–∞';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: var(--primary);
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-bold);
    pointer-events: none;
    z-index: var(--z-base);
    background: var(--bg-primary);
    padding: var(--spacing-lg) var(--spacing-2xl);
    border-radius: var(--radius-md);
    box-shadow: var(--drag-text-shadow);
    white-space: nowrap;
}

/* –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –ø—É—Å—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
.additional-content-items:empty::after {
    content: '–ü–ö–ú –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: var(--text-tertiary);
    font-size: var(--font-size-sm);
    font-style: italic;
    pointer-events: none;
    font-weight: var(--font-weight-medium);
}

/* –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–∏ drag over */
.additional-content-items.drag-over-file:empty::after {
    display: none;
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ —Ñ–∞–π–ª–æ–≤–æ–º drag */
.additional-content-items.drag-over-file .content-item-wrapper {
    pointer-events: none;
}

/* –≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ */
.content-item-wrapper {
    border: var(--content-item-border-width) solid var(--border);
    border-radius: var(--radius-md);
    overflow: hidden;
    background-color: var(--bg-primary);
    box-shadow: var(--shadow-sm);
    cursor: grab;
    min-height: var(--content-item-min-height);
    transition: all var(--transition-base);
    position: relative;
}

.content-item-wrapper:hover {
    border-color: var(--primary);
    box-shadow: var(--shadow);
}

.content-item-wrapper:active {
    cursor: grabbing;
}

/* –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ - —Ç–æ–ª—å–∫–æ –Ω–µ–±–æ–ª—å—à–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ */
.content-item-wrapper.dragging {
    opacity: var(--opacity-dragging);
    transform: scale(1.03);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary);
    z-index: var(--z-dropdown);
    cursor: grabbing;
}

/* –ú–µ—Ç–∫–∞ —Ç–∏–ø–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ */
.content-item-label {
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--content-label-gradient);
    color: var(--text-primary);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: var(--letter-spacing-wide);
    border-bottom: var(--border-width-thin) solid var(--border);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    user-select: none;
    transition: background var(--transition-base);
}

/* –ò–∫–æ–Ω–∫–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è */
.drag-handle-inline {
    color: var(--primary);
    font-size: var(--icon-size);
    line-height: 1;
    cursor: grab;
    opacity: var(--opacity-subtle);
    transition: all var(--transition-base);
}

.content-item-wrapper:hover .drag-handle-inline {
    opacity: 1;
}

.content-item-wrapper:active .drag-handle-inline {
    cursor: grabbing;
}

/* –ú–∏–Ω–∏–∞—Ç—é—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ */
.drag-miniature {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--drag-miniature-gradient);
    color: var(--text-on-primary);
    border-radius: var(--radius-md);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-bold);
    box-shadow: var(--drag-miniature-shadow);
    white-space: nowrap;
    letter-spacing: var(--letter-spacing-wide);
}

.drag-miniature-icon {
    font-size: var(--icon-size-lg);
}

.drag-miniature-label {
    font-weight: var(--font-weight-bold);
}

/* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –ö–ï–ô–°–ê –ò –¢–ï–ö–°–¢–ê */
.content-item {
    padding: var(--spacing-md);
    display: flex;
    gap: var(--spacing-sm);
    align-items: flex-start;
    background-color: var(--bg-primary);
}

/* Textarea –≤–Ω—É—Ç—Ä–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ */
.content-item .violation-textarea {
    flex: 1;
    min-height: calc(var(--violation-textarea-min-height) - var(--spacing-xl));
    width: 100%;
}

/* –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
.image-item {
    padding: var(--spacing-md);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    background-color: var(--bg-primary);
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
.image-preview-container {
    width: 100%;
    height: var(--image-preview-height);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    cursor: inherit;
    background: var(--gray-50);
    border-radius: var(--radius-sm);
    overflow: hidden;
}

/* –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
.image-preview {
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
    object-fit: contain;
    border: var(--border-width-thin) solid var(--border-light);
    border-radius: var(--radius-sm);
    flex-shrink: 0;
    pointer-events: none;
    user-select: none;
    -webkit-user-drag: none;
}

/* –ò–º—è —Ñ–∞–π–ª–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
.image-filename {
    font-size: var(--font-size-xs);
    color: var(--text-tertiary);
    font-style: italic;
    word-break: break-all;
    padding: var(--spacing-xs) 0;
}

.content-item-wrapper:hover .image-filename {
    color: var(--text-secondary);
}

/* –ü–æ–ª–µ –≤–≤–æ–¥–∞ –ø–æ–¥–ø–∏—Å–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é */
.image-item .violation-list-input {
    width: 100%;
    padding: var(--spacing-sm) var(--spacing);
    border: var(--border-width-thin) solid var(--border);
    border-radius: var(--radius);
    font-family: var(--font-family-base);
    font-size: var(--font-size-sm);
    transition: all var(--transition-base);
    background-color: var(--input-bg);
    color: var(--input-text);
}

.image-item .violation-list-input:hover {
    border-color: var(--input-border-hover);
}

.image-item .violation-list-input:focus {
    outline: none;
    border-color: var(--input-border-focus);
    box-shadow: var(--input-shadow-focus);
}

.image-item .violation-list-input::placeholder {
    color: var(--input-placeholder);
}

/* –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
.content-item-delete {
    position: absolute;
    top: var(--spacing-sm);
    right: var(--spacing-sm);
    width: var(--content-delete-btn-size);
    height: var(--content-delete-btn-size);
    border: none;
    background: var(--error);
    color: var(--text-on-primary);
    border-radius: var(--radius);
    cursor: pointer;
    opacity: 0;
    transition: all var(--transition-base);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-lg);
    z-index: var(--z-base);
}

.content-item-wrapper:hover .content-item-delete {
    opacity: 1;
}

.content-item-delete:hover {
    background: var(--error-hover);
    transform: scale(1.1);
}

.content-item-delete:active {
    transform: scale(0.95);
}
