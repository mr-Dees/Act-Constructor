<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ЦК Фин.Рез.</title>

    <!-- Основные стили -->
    <link rel="stylesheet" href="{{ url_for('static', path='css/main.css') }}">
</head>
<body>
<div class="sidebar-layout">
    <!-- Левый сайдбар с навигацией -->
    {% include 'components/landing_sidebar.html' %}

    <!-- Основной контент -->
    <main class="sidebar-layout-main">
        <!-- Шапка страницы -->
        {% include 'components/landing_topbar.html' %}

        <!-- Выпадающее меню настроек -->
        {% include 'components/settings_menu.html' %}

        <!-- Контент страницы -->
        <div class="stub-page-content">
            <div class="stub-page-placeholder">
                <svg class="stub-page-icon" width="64" height="64" viewBox="0 0 24 24" fill="none">
                    <path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <h2 class="stub-page-title">ЦК Фин.Рез.</h2>
                <p class="stub-page-text">Раздел находится в разработке</p>
            </div>
        </div>
    </main>
</div>

<!-- Модальный чат -->
<div id="chatModalOverlay" class="chat-modal-overlay hidden">
    <div class="chat-modal-container">
        {% include 'components/chat_content.html' %}
    </div>
</div>

<!-- Компонент для ошибок авторизации -->
{% include 'components/auth_error.html' %}

<!-- Скрипты -->
<script src="{{ url_for('static', path='js/app-config.js') }}"></script>
<script src="{{ url_for('static', path='js/auth.js') }}"></script>
<script src="{{ url_for('static', path='js/landing-sidebar.js') }}"></script>
<script src="{{ url_for('static', path='js/chat-manager.js') }}"></script>
<script src="{{ url_for('static', path='js/chat-modal.js') }}"></script>
<script src="{{ url_for('static', path='js/landing-settings.js') }}"></script>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const isAuthorized = await AuthManager.requireAuth();

        if (isAuthorized) {
            LandingSidebar.init();
            LandingSettingsManager.init();
        }
    });
</script>
</body>
</html>
