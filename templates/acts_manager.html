<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Управление актами</title>

    <!-- Основные стили -->
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body>
<div class="acts-manager-page">
    <div class="acts-manager-container">
        <div class="acts-manager-header">
            <h1 class="acts-manager-title">Управление актами</h1>
            <p class="acts-manager-subtitle">Создавайте, редактируйте и организуйте свои акты</p>
        </div>

        <div class="acts-actions">
            <button id="createNewActBtn" class="btn btn-primary">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
                </svg>
                Создать новый акт
            </button>
        </div>

        <div id="actsListContainer" class="acts-list-container">
            <div class="acts-loading">
                <div class="spinner"></div>
                <span>Загрузка актов...</span>
            </div>
        </div>
    </div>
</div>

<!-- Шаблоны для JS -->
{% include 'components/acts/create_act_dialog.html' %}
{% include 'components/acts/team_member_row.html' %}
{% include 'components/acts/directive_row.html' %}
{% include 'components/acts/acts_loading.html' %}
{% include 'components/acts/acts_empty_state.html' %}
{% include 'components/acts/acts_error_state.html' %}
{% include 'components/acts/acts_card.html' %}
{% include 'components/auth_error.html' %}

<script src="/static/js/app-config.js"></script>
<script src="/static/js/auth.js"></script>

<!-- Диалоговая система -->
<script src="/static/js/dialog/dialog-base.js"></script>
<script src="/static/js/dialog/dialog-confirm.js"></script>
<script src="/static/js/dialog/dialog-create-act.js"></script>

<script src="/static/js/notifications.js"></script>
<script src="/static/js/acts-manager-page.js"></script>

<script>
    // Проверка авторизации при загрузке страницы менеджера актов
    document.addEventListener('DOMContentLoaded', async () => {
        // Требуем свежую авторизацию через API
        const isAuthorized = await AuthManager.requireAuth();

        if (isAuthorized) {
            // Инициализируем страницу только после успешной авторизации
            ActsManagerPage.init();
        }
    });
</script>
</body>
</html>
