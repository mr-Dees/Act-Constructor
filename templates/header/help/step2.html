<!-- Инструкция для шага 2: Заполнение данных -->
<div id="help-step-2-content" class="help-content" style="display: none;">

    <div class="help-panel info">
        <div class="help-title">Общие сведения</div>
        <p>На этом шаге вы заполняете данными все элементы, созданные на предыдущем шаге:
            таблицы, текстовые блоки и нарушения. Элементы отображаются последовательно
            в порядке структуры дерева.</p>
    </div>

    <h3>Таблицы</h3>

    <h4>Выделение ячеек</h4>
    <ul class="help-list">
        <li><strong>Клик</strong> на ячейке — выделить одну ячейку</li>
        <li><strong>Ctrl + Click</strong> — добавить ячейку к выделению (множественный выбор)</li>
        <li><strong>Клик вне таблицы</strong> или <strong>Escape</strong> — снять выделение</li>
    </ul>

    <h4>Редактирование ячеек</h4>
    <ul class="help-list">
        <li><strong>Двойной клик</strong> на ячейке — войти в режим редактирования</li>
        <li><strong>Enter</strong> — сохранить и завершить редактирование</li>
        <li><strong>Shift + Enter</strong> — перенос строки внутри ячейки</li>
        <li><strong>Escape</strong> — отменить редактирование</li>
    </ul>

    <h4>Контекстное меню таблицы</h4>
    <p>Нажмите <strong>правой кнопкой мыши</strong> на ячейке для доступа к операциям:</p>
    <table>
        <thead>
            <tr>
                <th>Действие</th>
                <th>Описание</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>Объединить ячейки</strong></td>
                <td>Объединяет выделенные ячейки в одну (требуется выделить несколько)</td>
            </tr>
            <tr>
                <td><strong>Разъединить ячейку</strong></td>
                <td>Разбивает ранее объединённую ячейку на исходные</td>
            </tr>
            <tr>
                <td><strong>Вставить строку выше / ниже</strong></td>
                <td>Добавляет новую строку относительно текущей позиции</td>
            </tr>
            <tr>
                <td><strong>Удалить строку</strong></td>
                <td>Удаляет выделенную строку (строку заголовка удалить нельзя)</td>
            </tr>
            <tr>
                <td><strong>Вставить столбец слева / справа</strong></td>
                <td>Добавляет новый столбец относительно текущей позиции</td>
            </tr>
            <tr>
                <td><strong>Удалить столбец</strong></td>
                <td>Удаляет выделенный столбец</td>
            </tr>
        </tbody>
    </table>

    <h4>Изменение размеров</h4>
    <ul class="help-list">
        <li>Потяните за <strong>правый край столбца</strong> — изменение ширины</li>
        <li>Потяните за <strong>нижний край строки</strong> — изменение высоты</li>
        <li>Размеры сохраняются автоматически</li>
    </ul>

    <div class="help-panel warning">
        <div class="help-title">Защищённые таблицы</div>
        <p>Таблицы показателей и рисков имеют защищённую структуру заголовков.
            Вы можете редактировать данные в ячейках, добавлять и удалять строки,
            но объединение и разъединение ячеек в таких таблицах заблокировано.</p>
    </div>

    <hr class="help-divider">

    <h3>Территориальные банки (раздел 5)</h3>
    <p>В пунктах раздела 5 можно указать территориальный банк (ТБ), к которому относится проверяемое направление.</p>
    <ul class="help-list">
        <li>Значок ТБ отображается справа от названия пункта в дереве</li>
        <li>Нажмите на значок, чтобы открыть выпадающий список доступных банков</li>
        <li>ТБ назначается на <strong>конечных пунктах</strong> (не имеющих подпунктов)</li>
        <li>Родительские пункты автоматически отображают объединённый список ТБ из всех дочерних пунктов</li>
    </ul>

    <hr class="help-divider">

    <h3>Текстовые блоки</h3>

    <p>Кликните на текстовый блок, чтобы начать редактирование. При фокусе появляется
        <strong>панель форматирования</strong> с набором инструментов:</p>

    <table>
        <thead>
            <tr>
                <th>Инструмент</th>
                <th>Горячая клавиша</th>
                <th>Описание</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>Жирный</strong></td>
                <td><code>Ctrl + Shift + B</code></td>
                <td>Полужирное начертание выделенного текста</td>
            </tr>
            <tr>
                <td><strong>Курсив</strong></td>
                <td><code>Ctrl + Shift + I</code></td>
                <td>Курсивное начертание выделенного текста</td>
            </tr>
            <tr>
                <td><strong>Подчёркивание</strong></td>
                <td><code>Ctrl + Shift + U</code></td>
                <td>Подчёркнутое начертание выделенного текста</td>
            </tr>
            <tr>
                <td><strong>Зачёркивание</strong></td>
                <td><code>Ctrl + Shift + X</code></td>
                <td>Зачёркнутое начертание выделенного текста</td>
            </tr>
            <tr>
                <td><strong>Гиперссылка</strong></td>
                <td><code>Ctrl + Shift + K</code></td>
                <td>Вставить или отредактировать ссылку</td>
            </tr>
            <tr>
                <td><strong>Размер шрифта</strong></td>
                <td><code>Ctrl + Shift + &gt; / &lt;</code></td>
                <td>Увеличить / уменьшить размер шрифта по шкале</td>
            </tr>
            <tr>
                <td><strong>Выравнивание</strong></td>
                <td><code>Ctrl + Shift + A</code></td>
                <td>Циклическое переключение: лево → центр → право → по ширине</td>
            </tr>
            <tr>
                <td><strong>Сноски</strong></td>
                <td><code>Ctrl + Shift + F</code></td>
                <td>Добавить сноску к выделенному тексту</td>
            </tr>
        </tbody>
    </table>

    <hr class="help-divider">

    <h3>Нарушения</h3>

    <p>Блок нарушения содержит структурированные поля для описания выявленных нарушений.</p>

    <h4>Основные поля</h4>
    <ul class="help-list">
        <li><strong>Нарушено</strong> — описание нарушенных требований (левая колонка)</li>
        <li><strong>Установлено</strong> — описание фактически установленного (правая колонка)</li>
    </ul>

    <h4>Дополнительные поля</h4>
    <p>Используйте кнопки для добавления и удаления секций:</p>
    <ul class="help-list">
        <li><strong>Описание причин</strong> — список пунктов с возможностью перетаскивания</li>
        <li><strong>Дополнительный контент</strong> — кейсы, изображения и произвольный текст</li>
        <li><strong>Причины</strong> — описание причин нарушения</li>
        <li><strong>Последствия</strong> — описание последствий</li>
        <li><strong>Ответственные</strong> — указание ответственных лиц</li>
        <li><strong>Рекомендации</strong> — рекомендации по устранению</li>
    </ul>

    <h4>Работа с дополнительным контентом</h4>
    <p>Через контекстное меню (правый клик) можно добавлять элементы дополнительного контента:</p>
    <p>Доступна вставка через <code>Ctrl + V</code> из буфера обмена или перетаскиванием файла</p>
    <ul class="help-list">
        <li><strong>Кейс</strong> — нумерованное описание конкретного случая</li>
        <li><strong>Изображение</strong> — Для добавлени инфографики</li>
        <li><strong>Произвольный текст</strong> — свободное текстовое поле</li>
    </ul>
    <p>Элементы можно перетаскивать для изменения порядка. Нумерация обновляется автоматически.</p>

    <h4>Редактирование полей нарушения</h4>
    <ul class="help-list">
        <li><strong>Shift + Enter</strong> — перенос строки внутри поля</li>
        <li><strong>Enter</strong> — сохранить и завершить редактирование поля</li>
        <li><strong>Escape</strong> — отменить изменения</li>
    </ul>

    <hr class="help-divider">

    <h3>Сохранение и экспорт</h3>

    <div class="help-panel">
        <div class="help-title">Индикатор сохранения</div>
        <p>В верхней панели расположен индикатор, показывающий состояние сохранения:</p>
        <ul>
            <li><strong style="color: #e74c3c;">Красный</strong> — есть несохранённые изменения</li>
            <li><strong style="color: #f39c12;">Жёлтый</strong> — сохранено локально, но не синхронизировано с базой данных</li>
            <li><strong>Белый</strong> — все изменения синхронизированы</li>
        </ul>
        <p>Изменения автоматически сохраняются в локальное хранилище через 3 секунды после последнего редактирования.</p>
    </div>

    <h4>Экспорт акта</h4>
    <ul class="help-list">
        <li>Нажмите <strong>стрелку</strong> рядом с кнопкой «Сохранить», чтобы выбрать форматы экспорта</li>
        <li>Доступные форматы: <code>TXT</code>, <code>Markdown</code>, <code>DOCX</code>, <code>База данных</code></li>
        <li>Выбранные форматы запоминаются между сессиями</li>
        <li>Нажмите кнопку «Сохранить» для генерации документа — файлы будут предложены для скачивания</li>
    </ul>

    <h4>Горячие клавиши</h4>
    <table>
        <thead>
            <tr>
                <th>Клавиша</th>
                <th>Действие</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>Ctrl + S</code></td>
                <td>Сохранить акт и сгенерировать в выбранных форматах</td>
            </tr>
            <tr>
                <td><code>Ctrl + Shift + B / I / U</code></td>
                <td>Форматирование текста (жирный / курсив / подчёркивание)</td>
            </tr>
            <tr>
                <td><code>Ctrl + Shift + K</code></td>
                <td>Вставить или отредактировать гиперссылку</td>
            </tr>
            <tr>
                <td><code>Ctrl + Shift + F</code></td>
                <td>Вставить или отредактировать сноску</td>
            </tr>
            <tr>
                <td><code>Ctrl + Shift + X</code></td>
                <td>Зачёркивание текста</td>
            </tr>
            <tr>
                <td><code>Ctrl + Shift + &gt; / &lt;</code></td>
                <td>Увеличить / уменьшить размер шрифта</td>
            </tr>
            <tr>
                <td><code>Ctrl + Shift + A</code></td>
                <td>Переключить выравнивание текста (лево → центр → право → по ширине)</td>
            </tr>
            <tr>
                <td><code>Shift + Enter</code></td>
                <td>Перенос строки в ячейке таблицы или поле нарушения</td>
            </tr>
            <tr>
                <td><code>Escape</code></td>
                <td>Отменить редактирование / снять выделение / закрыть меню</td>
            </tr>
        </tbody>
    </table>

    <hr class="help-divider">

    <h4>Возврат к структуре</h4>
    <p>Нажмите кнопку <strong>"Назад"</strong> или кликните на индикатор <strong>Шага 1</strong>
        в заголовке, чтобы вернуться к редактированию структуры акта.</p>

</div>
